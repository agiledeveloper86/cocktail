<!DOCTYPE html>
<html lang="en">
	<head>
		<title>set_relation | Grocery CRUD, a Codeigniter CRUD</title>
	
		<meta name="keywords" content="" />
		<meta name="description" content="" />
		<meta name="resource-type" content="document" />
		<meta name="robots" content="all, index, follow"/>
		<meta name="googlebot" content="all, index, follow" /> 
	
		<link rel="canonical" href="set_relation.html" />
			
		<meta property="og:image" content="http://www.grocerycrud.com/assets/themes/default/images/logo-thumb.jpg"/>
		<link rel="search" type="application/opensearchdescription+xml" href="http://www.grocerycrud.com/opensearch.xml" title="Grocery CRUD Search">
		<link rel="image_src" href="http://www.grocerycrud.com/assets/themes/default/images/logo-thumb.jpg" />
		<link rel="shortcut icon" href="http://www.grocerycrud.com/assets/themes/default/images/favicon.png" type="image/x-icon"/>
	
		<link rel="stylesheet" href="http://www.grocerycrud.com/assets/themes/default/css/cache_ab4ac083805f8fb812d927285c647948.css?8202130805" type="text/css" />
	
		<script src="http://www.grocerycrud.com/assets/themes/default/js/jquery-1.7.1.min.js?8202130805"></script>
		
		<!--[if lt IE 9]>
			<script src="http://html5shim.googlecode.com/svn/trunk/html5.js"></script>
		<![endif]-->
		<!--[if IE 9]>
			<link rel="stylesheet" href="http://www.grocerycrud.com/assets/themes/default/css/ie9.css" type="text/css" /
		<![endif]-->
	</head>
<body>
<div class="container" id='top'>
		<header>
			<div id="logo">
				<a href="http://www.grocerycrud.com/">
					<img src="http://d328ce9sgcu5lp.cloudfront.net/themes/default/images/logo.png" alt="grocery CRUD logo" width='248' height='119' itemprop="image" >
				</a>
			</div>
			<div id='basic-menu'>
			
				<div id='header-top-right'>
				</div>
				<nav id="main-navigation">
					<ul>
						<li class='first'><a href="../../examples.html">Examples</a></li>
						<li class='current'><a href="../../documentation.html">Documentation</a></li>
						<li><a href="http://www.grocerycrud.com/downloads">Download</a></li>
						<li><a href="http://www.grocerycrud.com/forums">Forum</a></li>
						<li class='last'><a href="http://www.grocerycrud.com/donate">Donate</a></li>
					</ul>
				</nav>
			</div>
			<div class='clear'></div>
			<div class="h20"></div>
		</header>
	</div>
	    	
     	<div class='default-line'>
     		<div class="container">
        		<div class="left-container pt10 no-border">
                	<div class='home-grocery floatL'>
                    	<a href='http://www.grocerycrud.com/'><img src="http://d328ce9sgcu5lp.cloudfront.net/assets/themes/default/images/home-grocery.png" alt='' /></a>
                    </div>
                	<ul id='breadcrumb'>
<li itemtype="http://data-vocabulary.org/Breadcrumb" itemscope=""><a href="../../documentation.html" itemprop="url" ><span itemprop="title">Documentation</span></a>
</li><li itemtype="http://data-vocabulary.org/Breadcrumb" itemscope=""><a href="../../documentation/options_functions.html" itemprop="url" ><span itemprop="title">API and Functions list</span></a>
</li><li itemtype="http://data-vocabulary.org/Breadcrumb" itemscope=""><a href="set_relation.html" itemprop="url" ><span itemprop="title">set_relation</span></a>
</li>                    </ul>
                    <div class='clear'></div>
                </div>
	          <div class="right-container pt10">
				<form action='/search' method='get'>
					<div class='search-box'>
						<div class='floatL'>
							<input id='quick_search' name='q' type='text' value='Quick Search...' onclick="javascript: document.getElementById('quick_search').value = '';" onblur ="javascript: if(document.getElementById('quick_search').value == '') document.getElementById('quick_search').value = 'Quick Search...';" />
						</div>
						<div class='floatR'>
							<input type='image' src="http://d328ce9sgcu5lp.cloudfront.net/assets/themes/default/images/quick-search-button.png" alt='' />
						</div>
						<div class='clear'></div>
					</div>
				</form>	
			  </div>                  
                <div class='clear'></div>
     		</div>   		
     	</div>
		
		 <div class="container">		
        <section class='one-column-container pt10'>
        		<div class='content'>
					<h1>set_relation</h1>
	                 <div class='super'><div class="code"><pre class="php">void set_relation<span style="color: #66cc66;">&#40;</span> string <span style="color: #0000ff;">$field_name</span> , string  <span style="color: #0000ff;">$related_table</span>, string  <span style="color: #0000ff;">$related_title_field</span>  <span style="color: #66cc66;">&#91;</span>, mixed <span style="color: #0000ff;">$where</span> <span style="color: #66cc66;">&#91;</span>, string <span style="color: #0000ff;">$order_by</span> <span style="color: #66cc66;">&#93;</span> <span style="color: #66cc66;">&#93;</span> <span style="color: #66cc66;">&#41;</span></pre></div></div>
<p>Set a relation 1-n database relation. This will automatically create a dropdown list to the fields and show the actual name of the field and not just a primary key to the list. An example of this:</p>
<div class="code"><pre class="php">&nbsp;
<span style="color: #0000ff;">$crud</span>-&gt;<span style="color: #006600;">set_relation</span><span style="color: #66cc66;">&#40;</span><span style="color: #ff0000;">'user_id'</span>,<span style="color: #ff0000;">'users'</span>,<span style="color: #ff0000;">'username'</span><span style="color: #66cc66;">&#41;</span>;
&nbsp;</pre></div>

<p>You can have as many fields you like to call from the other table and the syntax is really simple. Just at the 3rd field you will have the symbol { and } . So it will be for example:</p>
<div class="code"><pre class="php">&nbsp;
<span style="color: #0000ff;">$crud</span>-&gt;<span style="color: #006600;">set_relation</span><span style="color: #66cc66;">&#40;</span><span style="color: #ff0000;">'user_id'</span>,<span style="color: #ff0000;">'users'</span>,<span style="color: #ff0000;">'{username} - {last_name} {first_name}'</span><span style="color: #66cc66;">&#41;</span>;
&nbsp;</pre></div>
 
<p>And you can have whatever syntax or symbols you like. So for example you can have:</p>
<div class="code"><pre class="php">&nbsp;
<span style="color: #0000ff;">$crud</span>-&gt;<span style="color: #006600;">set_relation</span><span style="color: #66cc66;">&#40;</span><span style="color: #ff0000;">'user_id'</span>,<span style="color: #ff0000;">'users'</span>,<span style="color: #ff0000;">'{username} ( {last_name} {first_name} )'</span><span style="color: #66cc66;">&#41;</span>;
&nbsp;</pre></div>
The parenthesis is just to show you that you can insert whatever symbol you like.</p>

<p>You can also have a where clause at the 4th parameter (is not a required parameter). For example:</p>
<div class="code"><pre class="php">&nbsp;
<span style="color: #0000ff;">$crud</span>-&gt;<span style="color: #006600;">set_relation</span><span style="color: #66cc66;">&#40;</span><span style="color: #ff0000;">'user_id'</span>,<span style="color: #ff0000;">'users'</span>,<span style="color: #ff0000;">'username'</span>,<a href="http://www.php.net/array"><span style="color: #000066;">array</span></a><span style="color: #66cc66;">&#40;</span><span style="color: #ff0000;">'status'</span> =&gt; <span style="color: #ff0000;">'active'</span><span style="color: #66cc66;">&#41;</span><span style="color: #66cc66;">&#41;</span>;
&nbsp;</pre></div>
<p>It works exactly like codeigniter's where clause (you can add an array or a string), with the only difference that you cannot add a 3rd parameter (for example true or false).</p>
<p>The 5th parameter (not required) is the order_by. For example:</p>
<div class="code"><pre class="php">&nbsp;
<span style="color: #0000ff;">$crud</span>-&gt;<span style="color: #006600;">set_relation</span><span style="color: #66cc66;">&#40;</span><span style="color: #ff0000;">'user_id'</span>,<span style="color: #ff0000;">'users'</span>,<span style="color: #ff0000;">'username'</span>,<span style="color: #000000; font-weight: bold;">null</span>,<span style="color: #ff0000;">'priority ASC'</span><span style="color: #66cc66;">&#41;</span>;
&nbsp;</pre></div>
<p>I added the 4th parameter as null because we don't need a where clause in this example. If we also need a where clause we can simply do:</p>
<div class="code"><pre class="php">&nbsp;
<span style="color: #0000ff;">$crud</span>-&gt;<span style="color: #006600;">set_relation</span><span style="color: #66cc66;">&#40;</span><span style="color: #ff0000;">'user_id'</span>,<span style="color: #ff0000;">'users'</span>,<span style="color: #ff0000;">'username'</span>,<a href="http://www.php.net/array"><span style="color: #000066;">array</span></a><span style="color: #66cc66;">&#40;</span><span style="color: #ff0000;">'status'</span> =&gt; <span style="color: #ff0000;">'active'</span><span style="color: #66cc66;">&#41;</span>,<span style="color: #ff0000;">'priority ASC'</span><span style="color: #66cc66;">&#41;</span>;
&nbsp;</pre></div>
<p><b>You can also see a simple working example below:</b></p>
<div class="code"><pre class="php"><span style="color: #000000; font-weight: bold;">function</span> employees_management<span style="color: #66cc66;">&#40;</span><span style="color: #66cc66;">&#41;</span>
<span style="color: #66cc66;">&#123;</span>
    <span style="color: #0000ff;">$crud</span> = <span style="color: #000000; font-weight: bold;">new</span> grocery_CRUD<span style="color: #66cc66;">&#40;</span><span style="color: #66cc66;">&#41;</span>;
&nbsp;
    <span style="color: #0000ff;">$crud</span>-&gt;<span style="color: #006600;">set_theme</span><span style="color: #66cc66;">&#40;</span><span style="color: #ff0000;">'datatables'</span><span style="color: #66cc66;">&#41;</span>;
    <span style="color: #0000ff;">$crud</span>-&gt;<span style="color: #006600;">set_table</span><span style="color: #66cc66;">&#40;</span><span style="color: #ff0000;">'employees'</span><span style="color: #66cc66;">&#41;</span>;
    <span style="color: #0000ff;">$crud</span>-&gt;<span style="color: #006600;">display_as</span><span style="color: #66cc66;">&#40;</span><span style="color: #ff0000;">'officeCode'</span>,<span style="color: #ff0000;">'Office City'</span><span style="color: #66cc66;">&#41;</span>;
    <span style="color: #0000ff;">$crud</span>-&gt;<span style="color: #006600;">set_subject</span><span style="color: #66cc66;">&#40;</span><span style="color: #ff0000;">'Employee'</span><span style="color: #66cc66;">&#41;</span>;
&nbsp;
    <span style="color: #0000ff;">$crud</span>-&gt;<span style="color: #006600;">set_relation</span><span style="color: #66cc66;">&#40;</span><span style="color: #ff0000;">'officeCode'</span>,<span style="color: #ff0000;">'offices'</span>,<span style="color: #ff0000;">'city'</span><span style="color: #66cc66;">&#41;</span>;
&nbsp;
    <span style="color: #0000ff;">$output</span> = <span style="color: #0000ff;">$crud</span>-&gt;<span style="color: #006600;">render</span><span style="color: #66cc66;">&#40;</span><span style="color: #66cc66;">&#41;</span>;
&nbsp;
    <span style="color: #0000ff;">$this</span>-&gt;_example_output<span style="color: #66cc66;">&#40;</span><span style="color: #0000ff;">$output</span><span style="color: #66cc66;">&#41;</span>;
<span style="color: #66cc66;">&#125;</span></pre></div>
<div id="bsap_1271391" class="bsarocks bsap_19492eb42d0fd695352ecaefa1dc0a1d"></div>
<div style="z-index:99;position:absolute;font-size:11px; margin-left:852px;margin-top: -22px"><a id="bsap_aplink" href="http://adpacks.com/">via Ad Packs</a></div>
<div class='clear'></div>
<div style="padding-top:10px;margin-bottom:5px;">
	<b>Note:</b> The below example is an iframe so it might appeared with a scroll bar. If you like you can view the example 
	<a href='http://www.grocerycrud.com/demo/employees_management' target='_blank' rel='nofollow' >
		on a new tab
	</a>
</div>
<div>
	<iframe src="http://www.grocerycrud.com/demo/employees_management/iframe" width="100%" height="900" style="border:none;"></iframe>
</div>                 </div>
          </section>
                    <div class="clear"></div>
	</div>
	<footer class='container-full footer-background'>
		<div class='container'>
			<div class='footer-left'>
				Grocery CRUD is released with <a href="https://github.com/scoumbourdis/grocery-crud/blob/master/license-grocery-crud.txt" target="_blank">dual licensing</a>, using the <a href="https://github.com/scoumbourdis/grocery-crud/blob/master/license-gpl3.txt" target="_blank">GPL v3</a>
				 and the <a href="https://github.com/scoumbourdis/grocery-crud/blob/master/license-mit.txt" target="_blank">MIT license</a>.
				<div style="height: 15px;"></div>
				<div class='floatL'>
				 	Copyright &copy; <a href="https://plus.google.com/u/0/107789497808468736690?rel=author" target="_blank">John Skoumbourdis</a> | <a href='http://www.web-and-development.com/' target="_blank">www.web-and-development.com</a>
				 </div>		 
				 <div class="floatL" style="margin-left:10px;margin-top: -7px;">
					<form id='donate-form' action="https://www.paypal.com/cgi-bin/webscr" method="post">
						<input type="hidden" name="cmd" value="_s-xclick" />
						<input type="hidden" name="hosted_button_id" value="RTHNZ5U8K8RKQ" />
						<input style='border:none' type="image" src="http://www.grocerycrud.com/assets/themes/default/images/btn_donate_LG.gif" name="submit" alt="PayPal - The safer, easier way to pay online!" />
					</form>				 
				 </div>
				 <div class="clear"></div>				
			 </div>
			 
			 <div id='browsers-logos'>
				<div class="h10"></div>			
				  <a href="http://www.facebook.com/pages/Grocery-CRUD/226957574012339" target='_blank' title="Facebook"><span class="mozila"></span></a> 
				  <a href="https://plus.google.com/u/0/102534880214903785396" target='_blank' title="Google +"><span class="chrome"></span></a> 
				  <a href="https://twitter.com/groceryCRUD" target='_blank' title="Twitter"><span class="explorer"></span></a>
				  <a href="https://github.com/scoumbourdis/grocery-crud" target='_blank' title="GitHub"><span class="github"></span></a> 
				  				
				<div class='clear'></div>
			 </div>
			 <div class='clear'></div>
		 </div>
	</footer>
			<script type="text/javascript">
	(function(){
	  var bsa = document.createElement('script');
	     bsa.type = 'text/javascript';
	     bsa.async = true;
	     bsa.src = 'http://s3.buysellads.com/ac/bsa.js';
	  (document.getElementsByTagName('head')[0]||document.getElementsByTagName('body')[0]).appendChild(bsa);
	})();
	</script>
			
		<!-- Google Analytics -->
	<script type="text/javascript">

	  var _gaq = _gaq || [];
	  _gaq.push(['_setAccount', 'UA-23493740-1']);
	  _gaq.push(['_trackPageview']);

	  (function() {
		var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
		ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
		var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
	  })();

	</script>
	</body>
</html>